function h1=VizQuerry
warning('off');%shortcut made to suppress copious warnings due to uibuttongroup

h1 = figure(...
'Units','characters',...
'PaperUnits',get(0,'defaultfigurePaperUnits'),...
'Color',[0.941176470588235 0.941176470588235 0.941176470588235],...
'Colormap',[0 0 0.5625;0 0 0.625;0 0 0.6875;0 0 0.75;0 0 0.8125;0 0 0.875;0 0 0.9375;0 0 1;0 0.0625 1;0 0.125 1;0 0.1875 1;0 0.25 1;0 0.3125 1;0 0.375 1;0 0.4375 1;0 0.5 1;0 0.5625 1;0 0.625 1;0 0.6875 1;0 0.75 1;0 0.8125 1;0 0.875 1;0 0.9375 1;0 1 1;0.0625 1 1;0.125 1 0.9375;0.1875 1 0.875;0.25 1 0.8125;0.3125 1 0.75;0.375 1 0.6875;0.4375 1 0.625;0.5 1 0.5625;0.5625 1 0.5;0.625 1 0.4375;0.6875 1 0.375;0.75 1 0.3125;0.8125 1 0.25;0.875 1 0.1875;0.9375 1 0.125;1 1 0.0625;1 1 0;1 0.9375 0;1 0.875 0;1 0.8125 0;1 0.75 0;1 0.6875 0;1 0.625 0;1 0.5625 0;1 0.5 0;1 0.4375 0;1 0.375 0;1 0.3125 0;1 0.25 0;1 0.1875 0;1 0.125 0;1 0.0625 0;1 0 0;0.9375 0 0;0.875 0 0;0.8125 0 0;0.75 0 0;0.6875 0 0;0.625 0 0;0.5625 0 0],...
'IntegerHandle','off',...
'InvertHardcopy',get(0,'defaultfigureInvertHardcopy'),...
'MenuBar','none',...
'Name','Visualization Options',...
'NumberTitle','off',...
'PaperPosition',get(0,'defaultfigurePaperPosition'),...
'PaperSize',get(0,'defaultfigurePaperSize'),...
'PaperType',get(0,'defaultfigurePaperType'),...
'Position',[103.833333333333 36.4375 45.1666666666667 25],...
'Resize','off',...
'HandleVisibility','callback',...
'UserData',[],...
'Tag','figure1',...
'Visible','off');

load VizQuerryData.mat


h2 = uicontrol(...
'Parent',h1,...
'Units','characters',...
'FontSize',12,...
'FontWeight','demi',...
'Position',[6.33333333333333 21.8125 33.5 1.3125],...
'String','Visualization Options',...
'Style','text',...
'Tag','text1');

h3 = uibuttongroup(...
'Parent',h1,...
'Units','characters',...
'Title','Visualize data...',...
'Tag','VizWhat',...
'Clipping','on',...
'Position',[1.5 15.5 41.8333333333333 5.6875],...
'SelectedObject',[],...
'SelectionChangeFcn',[],...
'OldSelectedObject',[]);

% h4 = uicontrol(...
% 'Parent',h3,...
% 'Units','characters',...
% 'Callback',mat{1},...
% 'CData',[],...
% 'FontSize',get(0,'defaultuicontrolFontSize'),...
% 'Position',[1.5 2.9375 29.8333333333333 1.4375],...
% 'String','Subject z-scores',...
% 'Style','radiobutton',...
% 'Tag','zscore');


h5 = uicontrol(...
'Parent',h3,...
'Units','characters',...
'Callback',mat{2},...
'FontSize',get(0,'defaultuicontrolFontSize'),...
'Position',[1.5 0.4375 31.1666666666667 1.4375],...
'String','Group mean',...
'Style','radiobutton',...
'Tag','mean');

h6 = uicontrol(...
'Parent',h3,...
'Units','characters',...
'Callback',mat{3},...
'FontSize',get(0,'defaultuicontrolFontSize'),...
'Position',[1.5 1.6875 31.5 1.4375],...
'String','Subject biomarker values',...
'Style','radiobutton',...
'Tag','raw');

h7 = uicontrol(...
'Parent',h1,...
'Units','characters',...
'Callback',{@pushbutton1_Callback,guidata(h1)},...
'FontSize',get(0,'defaultuicontrolFontSize'),...
'Position',[11.3333333333333 1.125 21.8333333333333 1.9375],...
'String','OK',...
'Tag','pushbutton1');

h8 = uibuttongroup(...
'Parent',h1,...
'Units','characters',...
'Title','Visualize layout...',...
'Tag','VizLay',...
'UserData',[],...
'Clipping','on',...
'Position',[1.33333333333333 4.25 41.8333333333333 5.0625],...
'SelectedObject',[],...
'SelectionChangeFcn',[],...
'OldSelectedObject',[]);

h9 = uicontrol(...
'Parent',h8,...
'Units','characters',...
'Callback',mat{4},...
'CData',[],...
'FontSize',get(0,'defaultuicontrolFontSize'),...
'Position',[1.16666666666667 2.3125 33.8333333333333 1.4375],...
'String','Default',...
'Style','radiobutton',...
'Value',[],...
'UserData',[],...
'Tag','dflt');

% h10 = uicontrol(...
% 'Parent',h8,...
% 'Units','characters',...
% 'Callback',mat{5},...
% 'CData',[],...
% 'FontSize',get(0,'defaultuicontrolFontSize'),...
% 'Position',[1.33333333333333 0.625 28.6666666666667 1.4375],...
% 'String','Don''t pad empty bioms',...
% 'Style','radiobutton',...
% 'UserData',[],...
% 'Tag','cstm');

h11 = uibuttongroup(...
'Parent',h1,...
'Units','characters',...
'Title','Visualize significant results ...',...
'Tag','VizSig',...
'UserData',[],...
'Clipping','on',...
'Position',[1.5 9.875 41.8333333333333 5.0625],...
'SelectedObject',[],...
'SelectionChangeFcn',[],...
'OldSelectedObject',[]);

h12 = uicontrol(...
'Parent',h11,...
'Units','characters',...
'Callback',mat{6},...
'CData',[],...
'FontSize',get(0,'defaultuicontrolFontSize'),...
'Position',[1.5 2.3125 33.8333333333333 1.4375],...
'String','All',...
'Style','radiobutton',...
'Value',[],...
'UserData',[],...
'Tag','all');


h13 = uicontrol(...
'Parent',h11,...
'Units','characters',...
'Callback',mat{7},...
'CData',[],...
'FontSize',get(0,'defaultuicontrolFontSize'),...
'Position',[1.5 0.625 28.6666666666667 1.4375],...
'String','Only significant',...
'Style','radiobutton',...
'UserData',[],...
'Tag','sig');

movegui(h1,'center')
set(h1, 'Visible','on');

function pushbutton1_Callback(hObject, eventdata,handles)
% hObject    handle to pushbutton1 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
assignin('caller','dataType',get(get(h3,'SelectedObject'),'Tag'));
assignin('caller','VIZ_LAYOUT',get(get(h8,'SelectedObject'),'Tag'));
assignin('caller','VIZ_SIG',get(get(h11,'SelectedObject'),'Tag'));



close(h1);
end 
end
